<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Wrapper &mdash; selenium_wrapper 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="selenium_wrapper 0.1 documentation" href="index.html" />
    <link rel="next" title="Wrapper Module sw.wrapper" href="sw.wrapper.html" />
    <link rel="prev" title="Script Converter" href="sw_converter.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="sw.wrapper.html" title="Wrapper Module sw.wrapper"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="sw_converter.html" title="Script Converter"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">selenium_wrapper 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="wrapper">
<h1>Wrapper<a class="headerlink" href="#wrapper" title="Permalink to this headline">¶</a></h1>
<p>The wrapper can be launched by using <tt class="docutils literal"><span class="pre">run.bat</span></tt> in Windows or <tt class="docutils literal"><span class="pre">python</span> <span class="pre">run_test.py</span></tt> on any system with Python setup and configured in its path.
Everything is automatically prepared, an optional initial settings wizard is shown on startup.</p>
<div class="section" id="initial-settings">
<h2>Initial Settings<a class="headerlink" href="#initial-settings" title="Permalink to this headline">¶</a></h2>
<a class="reference internal image-reference" href="_images/initialsettings.png"><img alt="Initial settings wizard showing several options to be configured." src="_images/initialsettings.png" style="width: 482px; height: 227px;" /></a>
<p>The initial settings wizard allows configuration and validation of settings before running. Each option has a respective
options directive seen in <a class="reference internal" href="sw_converter.html#options-directives"><em>Options Directives</em></a> including the option to disable the initial settings wizard entirely.
To select an option enter the letter to the left of the label and then hit enter. Any entered text or numbers will be converted
to the required type (for example, for the port an integer) upon hitting enter.
To restore an option to its default, remove all text from the field and hit enter.
When complete, hit enter with no selection and your settings will be validated. If there are no issues with your settings,
the script will begin.</p>
<div class="section" id="run-settings">
<h3>Run Settings<a class="headerlink" href="#run-settings" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none"><div class="highlight"><pre>a) # Children:     1
b) Stagger Spawn:  False
c) # Jobs:         1
</pre></div>
</div>
<p><strong># Children</strong>
determines the number of concurrent PhantomJS processes the script will run.
Although the default number is 1, users with a more powerful processor will find themselves capable
of running over 20, though this varies wildly with the script ran. Scripts with a great deal of waiting on page elements
can run with more concurrent instances than those which are actively clicking or navigating.</p>
<p><strong>Stagger Spawn</strong>
, which is short for staggered child spawning, is intended to distribute load throughout a site more evenly.
Without staggering and with a high number of children, the load will be very pinpointed at an exact point
of the site consistently, at least at the beginning. This options spawns children 5 seconds apart by default but can be configured
using <a class="reference internal" href="sw_converter.html#options-directives"><em>staggertime</em></a>.</p>
<p><strong># Jobs</strong>
determines the number of times the recorded script will run. Every child process
will pull from a job queue (of this length) when it starts and will do so until the queue is empty</p>
</div>
<div class="section" id="pool-settings">
<h3>Pool Settings<a class="headerlink" href="#pool-settings" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none"><div class="highlight"><pre>Pool Settings
d) Log Lvl (0-5):  -1
e) Get Images:     False
</pre></div>
</div>
<p><strong>Log Level (0-5)</strong>
See <a class="reference internal" href="#logging">Logging</a></p>
<p><strong>Get Images</strong>
Determines whether PhantomJS will bother to download images. If during recording an image was clicked on, it must have
an alt tag for this option to be false.</p>
</div>
<div class="section" id="reporting-settings">
<span id="reporting-terms"></span><h3>Reporting Settings<a class="headerlink" href="#reporting-settings" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none"><div class="highlight"><pre>Reporting Settings
f) Server:         None
g) Port:           8089
h) User:           None
i) Password:       None
j) Index:          None
k) Project Name:   None
l) Run Name:       None
m) Script Name:    None
n) Client Name:    auto
</pre></div>
</div>
<p><strong>Server, Port, User, Password, Index</strong>
These options are all Splunk installation specific. Splunk must allow remote connections from the client&#8217;s host on a port, default is 8089
via the <a class="reference external" href="http://docs.splunk.com/Documentation/Splunk/latest/RESTAPI/RESTcontents">REST API</a>. Details about the Splunklib module and how it is used
can be found in <a class="reference internal" href="sw.report.html#module-sw.report" title="sw.report"><tt class="xref py py-mod docutils literal"><span class="pre">sw.report</span></tt></a> and official documentation <a class="reference external" href="http://docs.splunk.com/DocumentationStatic/PythonSDK/1.1/client.html">on Splunk&#8217;s website</a>.</p>
<p><strong>Project Name</strong>
is a layer of abstraction on individual recorded runs with various scripts. It is considered to be the highest level of abstraction to group together these runs, spanning over
days or months. A project would ideally contain a multitude of runs. There are checks done to make sure Project Name is used and valid.</p>
<p><strong>Run Name</strong>
is a layer of abstraction on individual scripts ran within a period of time, usually expected to be less than a day. Runs may contain one or more scripts to do various load testing.
Run names are checked for valid characters as well.</p>
<p><strong>Script Name</strong>
is the final layer of abstraction on an individual execution of a script. A script may be unique or may not within a run.</p>
<p><strong>Client Name</strong>
is usually left on auto. When autogenerated it takes the format <tt class="docutils literal"><span class="pre">user&#64;computername</span></tt>.</p>
</div>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>The Selenium Wrapper Console is composed of 3 separate sections: children (top left), controls (right), and statistics (bottom).</p>
<a class="reference internal image-reference" href="_images/wrapper_general.png"><img alt="General wrapper window showing two active children with one waiting." src="_images/wrapper_general.png" style="width: 482px; height: 227px;" /></a>
<div class="section" id="children-overview">
<h3>Children Overview<a class="headerlink" href="#children-overview" title="Permalink to this headline">¶</a></h3>
<p>Each child is assigned a unique index (#1, #2, #3 here). This index is printed and changes color depending on the status of the child process.</p>
<table border="1" class="docutils">
<colgroup>
<col width="44%" />
<col width="9%" />
<col width="11%" />
<col width="36%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Example</th>
<th class="head">Font</th>
<th class="head">Background</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><img alt="_images/child_running.png" class="first last" src="_images/child_running.png" />
</td>
<td>White</td>
<td>Black</td>
<td>Running</td>
</tr>
<tr class="row-odd"><td><img alt="_images/child_waiting.png" class="first last" src="_images/child_waiting.png" />
</td>
<td>White</td>
<td>Blue</td>
<td>Waiting</td>
</tr>
<tr class="row-even"><td><img alt="_images/child_job.png" class="first last" src="_images/child_job.png" />
</td>
<td>Black</td>
<td>Green</td>
<td>Job Finished</td>
</tr>
<tr class="row-odd"><td><img alt="_images/child_loading.png" class="first last" src="_images/child_loading.png" />
</td>
<td>Black</td>
<td>Yellow</td>
<td>Loading Subprocess</td>
</tr>
<tr class="row-even"><td><img alt="_images/child_error.png" class="first last" src="_images/child_error.png" />
</td>
<td>Black</td>
<td>Red</td>
<td>Fatal Error (screen flashes)</td>
</tr>
<tr class="row-odd"><td><img alt="_images/child_done.png" class="first last" src="_images/child_done.png" />
</td>
<td>Black</td>
<td>White</td>
<td>Child Offline</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="statistics-section">
<h3>Statistics Section<a class="headerlink" href="#statistics-section" title="Permalink to this headline">¶</a></h3>
<p>The statistics section shows the number of children, active number of children (<tt class="docutils literal"><span class="pre">Act</span></tt>), remaining jobs, successful jobs,
failed jobs, average job time, and jobs per minute or per second depending on time taken.</p>
<p><strong>Jobs per minute</strong> is split into two types. <strong>True</strong> jobs per minute and <strong>Ideal</strong> jobs per minute. <strong>True</strong> jobs per minute
is calculated by dividing the time elapsed by the number of jobs completed. This number
is accurate as it takes into account failed jobs. However, until a large number of nobs have been completed it jumps around a great deal.
It does not display until 5 jobs have completed.</p>
<p><strong>Ideal</strong> jobs per minute is a bit more complicated. It is 60 divided by the average job time multiplied by the number of children. This
result is greatly skewed by simply adding/disabling children. It is named ideal because it should be reached with few failures.</p>
</div>
<div class="section" id="controls-section">
<h3>Controls Section<a class="headerlink" href="#controls-section" title="Permalink to this headline">¶</a></h3>
<p>The controls section shows the 4 primary keys used to control pool operation. Keys are broken into three categories: designators, modifiers, and executors.
<tt class="docutils literal"><span class="pre">c</span></tt> and <tt class="docutils literal"><span class="pre">j</span></tt> are designators. Designators give a command to be modified by a modifier. Any number entered is a valid modifier as long as the window has space for it.
Executors are <tt class="docutils literal"><span class="pre">q</span></tt>, <tt class="docutils literal"><span class="pre">s</span></tt>, <tt class="docutils literal"><span class="pre">p</span></tt>, <tt class="docutils literal"><span class="pre">-</span></tt>, and <tt class="docutils literal"><span class="pre">+</span></tt>. Executors will take any valid modifiers and then perform an action. <tt class="docutils literal"><span class="pre">q</span></tt>, <tt class="docutils literal"><span class="pre">s</span></tt>, and <tt class="docutils literal"><span class="pre">p</span></tt> accept no modifiers or designators,
if any are provided they are discarded.</p>
<p>As you type, commands are visible in the bottom right corner of the controls section.</p>
<p>It is easiest to show valid usage for <tt class="docutils literal"><span class="pre">c</span></tt>/<tt class="docutils literal"><span class="pre">j</span></tt> with examples:</p>
<dl class="docutils">
<dt>Add a child to the pool:</dt>
<dd><ul class="first last simple">
<li><tt class="docutils literal"><span class="pre">c+</span></tt>. The executor <tt class="docutils literal"><span class="pre">+</span></tt> defaults to one if no number is specified.</li>
</ul>
</dd>
<dt>Remove a child:</dt>
<dd><ul class="first last simple">
<li><tt class="docutils literal"><span class="pre">c-</span></tt>. The executor <tt class="docutils literal"><span class="pre">-</span></tt> has the same behavior.</li>
</ul>
</dd>
<dt>Add 50 jobs to the pool:</dt>
<dd><ul class="first last simple">
<li><tt class="docutils literal"><span class="pre">j50+</span></tt>. Modifiers can be placed between designators and executors to increase action&#8217;s payloads.</li>
<li><tt class="docutils literal"><span class="pre">50j+</span></tt>. Modifiers are not location specific as long as they are before an executor.</li>
</ul>
</dd>
<dt>Remove 20 jobs from the pool:</dt>
<dd><ul class="first last simple">
<li><tt class="docutils literal"><span class="pre">j10-10j-</span></tt>. The moment an executor is inserted, the command buffer is cleared.</li>
<li><tt class="docutils literal"><span class="pre">20j-</span></tt>. These functions behave identically.</li>
</ul>
</dd>
<dt>Stop a pool:</dt>
<dd><ul class="first last simple">
<li><tt class="docutils literal"><span class="pre">q</span></tt>. Stops a pool and turns all children off. This sends a reporting notification off if reporting is enabled.</li>
</ul>
</dd>
<dt>Start a pool:</dt>
<dd><ul class="first last simple">
<li><tt class="docutils literal"><span class="pre">s</span></tt>. Starts a pool anew and sends a reporting notification off if enabled. This appears identical to a new launch to a reporting
server.</li>
</ul>
</dd>
<dt>(un)Pause a pool:</dt>
<dd><ul class="first last simple">
<li><tt class="docutils literal"><span class="pre">p</span></tt>. This is functionally similar to <tt class="docutils literal"><span class="pre">q</span></tt> and <tt class="docutils literal"><span class="pre">s</span></tt> however no events are sent off.</li>
</ul>
</dd>
</dl>
</div>
</div>
<div class="section" id="logging">
<span id="id1"></span><h2>Logging<a class="headerlink" href="#logging" title="Permalink to this headline">¶</a></h2>
<p>Logging is automatically performed and there is currently not an option to turn it off. All logs
are within a timestamped folder in <tt class="docutils literal"><span class="pre">logs/</span></tt>. Each child then create its own log in in that subfolder with the format
<tt class="docutils literal"><span class="pre">logs/&lt;timestamp&gt;/log-#.log</span></tt>, where the number is the child&#8217;s number printed to the console. This
log will contain detailed information about errors, time taken, and the status of the script.</p>
<p>Logging levels can be configured with the <a class="reference internal" href="sw_converter.html#options-directives"><em>level</em></a> directive or within the initial settings wizard.
Possible levels are as follows:</p>
<p>There are several levels as seen in <tt class="docutils literal"><span class="pre">conversion_files/includes/libs/sw/const.py</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">####################################################################################################</span>
<span class="c"># Error Log Levels</span>
<span class="c">#   Error log levels are used to mark a message as a certain category, then output it if that level</span>
<span class="c">#   of detail is requested.</span>
<span class="n">INFO</span>           <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="n">DEBUG</span>          <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="n">NOTICE</span>         <span class="o">=</span> <span class="mi">0</span>
<span class="n">WARNING</span>        <span class="o">=</span> <span class="mi">1</span>
<span class="n">ERR</span>            <span class="o">=</span> <span class="mi">2</span>
<span class="n">CRITICAL</span>       <span class="o">=</span> <span class="mi">3</span>
<span class="n">NONE</span>           <span class="o">=</span> <span class="mi">5</span>
<span class="c">####################################################################################################</span>
</pre></div>
</div>
<p>With the lowest log level, <tt class="docutils literal"><span class="pre">INFO</span></tt>, this is an example of a log that is prepared:</p>
<div class="highlight-none"><div class="highlight"><pre>[15:37:14] (NOTICE)   Child process started and loaded
[15:37:20] (NOTICE)   Beginning wait for element &quot;accounts&quot; of type &quot;link_text&quot;.
[15:37:35] (NOTICE)   Beginning wait for element &quot;OrderPage_Row_6&quot; of type &quot;name&quot;.
[15:37:42] (NOTICE)   Beginning wait for element &quot;clear_overlay&quot; of type &quot;id&quot;.
[15:37:46] (NOTICE)   In waitToDisappear &quot;clear_overlay&quot; was never there to begin with.
[15:37:46] (INFO)     Waiting for &quot;clear_overlay&quot;
[15:37:49] (INFO)     Element &quot;clear_overlay&quot; disappeared!
[15:37:50] (NOTICE)   Beginning wait for element &quot;clear_overlay&quot; of type &quot;id&quot;.
[15:37:54] (NOTICE)   In waitToDisappear &quot;clear_overlay&quot; was never there to begin with.
[15:37:57] (NOTICE)   Beginning wait for element &quot;AmountPage_Row_27&quot; of type &quot;name&quot;.
[15:38:02] (INFO)     Waiting for &quot;clear_overlay&quot;
[15:38:04] (INFO)     Element &quot;clear_overlay&quot; disappeared!
[15:38:05] (NOTICE)   Beginning wait for element &quot;clear_overlay&quot; of type &quot;id&quot;.
[15:38:08] (NOTICE)   In waitToDisappear &quot;clear_overlay&quot; was never there to begin with.
[15:38:08] (INFO)     Waiting for &quot;clear_overlay&quot;
[15:38:10] (INFO)     Element &quot;clear_overlay&quot; disappeared!
[15:38:10] (INFO)     Waiting for &quot;clear_overlay&quot;
[15:38:13] (INFO)     Element &quot;clear_overlay&quot; disappeared!
[15:38:13] (NOTICE)   Beginning wait for element &quot;clear_overlay&quot; of type &quot;id&quot;.
[15:38:16] (NOTICE)   In waitToDisappear &quot;clear_overlay&quot; was never there to begin with.
[15:38:17] (INFO)     Waiting for &quot;clear_overlay&quot;
[15:38:19] (INFO)     Element &quot;clear_overlay&quot; disappeared!
[15:38:19] (INFO)     Waiting for &quot;clear_overlay&quot;
[15:38:21] (INFO)     Element &quot;clear_overlay&quot; disappeared!
[15:38:22] (NOTICE)   Beginning wait for element &quot;clear_overlay&quot; of type &quot;id&quot;.
[15:38:25] (NOTICE)   In waitToDisappear &quot;clear_overlay&quot; was never there to begin with.
[15:38:25] (INFO)     Waiting for &quot;clear_overlay&quot;
[15:38:27] (INFO)     Element &quot;clear_overlay&quot; disappeared!
===================== &lt;More Waiting&gt;
[15:39:18] (INFO)     Waiting for &quot;clear_overlay&quot;
[15:39:25] (INFO)     Element &quot;clear_overlay&quot; disappeared!
[15:39:36] (NOTICE)   Successfully finished job (141.878000021s)
[15:39:36] (NOTICE)   Stopping child process: &quot;DONE&quot;
</pre></div>
</div>
<p>On the lowest log level, the wrapper gives a great deal of information about where it is waiting
for debugging purposes. Waits are only documented if they are engaged; if an element can already
be selected, no time is wasted waiting and the script directly interacts with it. The timestamp
on the far left is the exact time in which the message was printed, the next field is the log level
that this was printed at&#8212; if <tt class="docutils literal"><span class="pre">child.level</span></tt> were greater than this, it wouldn&#8217;t print. The final
field is the message itself.</p>
<p>Also placed within the log directory are any screenshots that were taken either as a directive
within the script or for an error. Any time a screenshot is created, it is noted in the respective
child&#8217;s log file where it was stored and at what time. For example, here is a log where an error was
encountered:</p>
<div class="highlight-none"><div class="highlight"><pre>[14:15:48] (NOTICE)   Child process started and loaded
[14:15:52] (NOTICE)   Beginning wait for element &quot;Accounts&quot; of type &quot;link_text&quot;.
[14:15:57] (NOTICE)   Choosing grower #16
[15:37:57] (NOTICE)   Beginning wait for element &quot;AmountPage_Row_27&quot; of type &quot;name&quot;.
[14:16:07] (ERROR)    &#39;sleepwait() takes exactly 3 arguments (4 given)&#39;
<span class="hll">[14:16:08] (ERROR)    Wrote screenshot to: /home/test/script_converter/out/test_script/logs/2014-08-26_14-15-45/error_0.png
</span>[14:16:08] (ERROR)    Stack trace: Traceback (most recent call last):
  File &quot;/home/test/script_converter/out/test_script/includes/libs/sw/child.py&quot;, line 144, in think
    func( self.driver )
  File &quot;/home/test/script_converter/out/test_script/run_test.py&quot;, line 30, in test_func
    waitToDisappear( driver, &#39;AmountPage_Row_27&#39; )
  File &quot;/home/test/script_converter/out/test_script/includes/libs/sw/utils.py&quot;, line 212, in waitToDisappear
    sleepwait( driver, element, type, kwargs )
  TypeError: sleepwait() takes exactly 3 arguments (4 given)
[14:16:08] (NOTICE)   Stopping child process: &quot;RESTARTING&quot;
</pre></div>
</div>
<p>The highlighted line shows where the screenshot was written to, <tt class="docutils literal"><span class="pre">error_#.png</span></tt>. Every new error increments this number.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Wrapper</a><ul>
<li><a class="reference internal" href="#initial-settings">Initial Settings</a><ul>
<li><a class="reference internal" href="#run-settings">Run Settings</a></li>
<li><a class="reference internal" href="#pool-settings">Pool Settings</a></li>
<li><a class="reference internal" href="#reporting-settings">Reporting Settings</a></li>
</ul>
</li>
<li><a class="reference internal" href="#usage">Usage</a><ul>
<li><a class="reference internal" href="#children-overview">Children Overview</a></li>
<li><a class="reference internal" href="#statistics-section">Statistics Section</a></li>
<li><a class="reference internal" href="#controls-section">Controls Section</a></li>
</ul>
</li>
<li><a class="reference internal" href="#logging">Logging</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="sw_converter.html"
                        title="previous chapter">Script Converter</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="sw.wrapper.html"
                        title="next chapter">Wrapper Module <tt class="docutils literal"><span class="pre">sw.wrapper</span></tt></a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/sw_wrapper.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="sw.wrapper.html" title="Wrapper Module sw.wrapper"
             >next</a> |</li>
        <li class="right" >
          <a href="sw_converter.html" title="Script Converter"
             >previous</a> |</li>
        <li><a href="index.html">selenium_wrapper 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Billy Rhoades.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>